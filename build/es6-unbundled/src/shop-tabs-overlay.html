<html><head><link rel="import" href="../bower_components/polymer/polymer-element.html"></head><body><dom-module id="shop-tabs-overlay"><template strip-whitespace=""><style>:host{position:absolute;display:none;pointer-events:none;opacity:0;top:0;right:0;bottom:0;left:0;transition-property:top, right, bottom, left, opacity;}</style></template><script>class ShopTabsOverlay extends Polymer.Element{static get is(){return"shop-tabs-overlay"}static get properties(){return{target:{type:Object,observer:"_targetChanged"}}}constructor(){super();this._lastTarget=void 0;this._transitionsInFlight=[]}ready(){super.ready();this.addEventListener("transitionend",e=>this._onTransitionend(e))}_targetChanged(newTarget,oldTarget){if(!this._transitionsInFlight.length){if(this._lastTarget){this._lastTarget.classList.remove("shop-tabs-overlay-static-above")}this.style.display="block";this._move(oldTarget,newTarget);this._lastTarget=this.target}}_onTransitionend(event){let index=this._transitionsInFlight.indexOf(event.propertyName);if(0<=index){this._transitionsInFlight.splice(index,1)}if(!this._transitionsInFlight.length){this._moveComplete()}}_moveComplete(){if(this._lastTarget!==this.target){this._move(this._lastTarget,this.target);this._lastTarget=this.target}else{if(this._lastTarget){this._lastTarget.classList.add("shop-tabs-overlay-static-above")}this.style.display="none"}}_move(oldTarget,newTarget){let from=oldTarget||newTarget,to=newTarget||oldTarget;if(!from&&!to)return;let fromOpacity=oldTarget?1:0,toOpacity=newTarget?1:0;Polymer.dom.flush();let thisRect=this.getBoundingClientRect(),thisStyle=window.getComputedStyle(this),fromRect=from.getBoundingClientRect(),toRect=to.getBoundingClientRect();if(0===toRect.top&&0===toRect.right&&0===toRect.bottom&&0===toRect.left&&0===toRect.width&&0===toRect.height){this.style.transitionProperty="none";this.style.opacity=toOpacity;this._transitionsInFlight=[];Polymer.Async.microTask.run(this._moveComplete.bind(this));return}else{this.style.transitionProperty=""}let top=parseFloat(thisStyle.top||"0")+(fromRect.top-thisRect.top),right=parseFloat(thisStyle.right||"0")-(fromRect.right-thisRect.right),bottom=parseFloat(thisStyle.bottom||"0")-(fromRect.bottom-thisRect.bottom),left=parseFloat(thisStyle.left||"0")+(fromRect.left-thisRect.left);this.style.transitionDuration="0s";this.style.transitionDelay="0s";let startValues=[this.style.top=top+"px",this.style.right=right+"px",this.style.bottom=bottom+"px",this.style.left=left+"px",this.style.opacity=fromOpacity+""];top+=toRect.top-fromRect.top;right-=toRect.right-fromRect.right;bottom-=toRect.bottom-fromRect.bottom;left+=toRect.left-fromRect.left;let durations=[.2,.2,.2,.2,.2],delays=[0,0,0,0,0];if(fromRect.left<toRect.left&&fromRect.right<toRect.right){delays[3]=.1}else if(fromRect.left>toRect.left&&fromRect.right>toRect.right){delays[1]=.1}if(fromRect.top<toRect.top&&fromRect.bottom<toRect.bottom){delays[0]=.1}else if(fromRect.top>toRect.top&&fromRect.bottom>toRect.bottom){delays[2]=.1}let endValues=[top+"px",right+"px",bottom+"px",left+"px",toOpacity+""],names=["top","right","bottom","left","opacity"];for(let i=0;i<startValues.length;i++){if(startValues[i]===endValues[i])continue;if(0===durations[i]&&0===delays[i])continue;this._transitionsInFlight.push(names[i])}Polymer.Async.timeOut.run(()=>{this.style.transitionDuration=durations.map(x=>{return x+"s"}).join(", ");this.style.transitionDelay=delays.map(x=>{return x+"s"}).join(", ");this.style.top=top+"px";this.style.right=right+"px";this.style.bottom=bottom+"px";this.style.left=left+"px";this.style.opacity=toOpacity+""},1)}}customElements.define(ShopTabsOverlay.is,ShopTabsOverlay);</script></dom-module></body></html>